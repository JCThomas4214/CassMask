!function(e){e.$fuse$=e,e.pkg("cassmask",{},function(e){return e.file("index.js",function(e,t,r,n,i){"use strict";function a(e,t){return a.schemaString(e,t)}function o(e){return o.schemaString(e)}function s(e){return s.schemaString(e)}function c(){return"now()"}function u(){return"uuid()"}function l(e){return"toTimeStamp("+e+")"}function f(t,r){e.client=new h.Client(t),e.client.connect(function(e,t){return e&&(console.error("Could not connect to CassandraDB!"),console.log(e)),r?r(e,t):null})}function p(e,t,r){var n=new v.SchemaHelper(e+"s",t);if(r)for(var i=0;i<r.length;i++)n.createIndex(r[i]);return new m(e+"s",t,n)}Object.defineProperty(e,"__esModule",{value:!0});var h=t("cassandra-driver"),d=t("rxjs"),v=t("./libs");e.Schema=v.Schema,e.Entity=v.Entity,e.MAP=a,function(e){function t(e,t){return"map<"+e+","+t+">"}function r(e){return{action:"append",payload:"+ "+e}}function n(e,t){return{action:"set",index:"["+e+"]",payload:t}}function i(e){return{action:"reset",payload:e}}function a(e){return{action:"remove",payload:"- { "+e.join(", ")+" }"}}e.schemaString=t,e.append=r,e.set=n,e.reset=i,e.remove=a}(a=e.MAP||(e.MAP={})),e.LIST=o,function(e){function t(e){return"list<"+e+">"}function r(e){return{action:"append",payload:"+ "+e}}function n(e){return{action:"prepend",payload:e+" +"}}function i(e,t){return{action:"set",index:"["+e+"]",payload:t}}function a(e){return{action:"reset",payload:e}}function o(e){return{action:"remove",index:"["+e+"]"}}e.schemaString=t,e.append=r,e.prepend=n,e.set=i,e.reset=a,e.remove=o}(o=e.LIST||(e.LIST={})),e.SET=s,function(e){function t(e){return"set<"+e+">"}function r(e){return{action:"append",payload:"+ "+e}}function n(e){return{action:"prepend",payload:e+" +"}}function i(e,t){return{action:"set",index:"["+e+"]",payload:t}}function a(e){return{action:"reset",payload:e}}function o(e){return{action:"remove",index:"["+e+"]"}}e.schemaString=t,e.append=r,e.prepend=n,e.set=i,e.reset=a,e.remove=o}(s=e.SET||(e.SET={})),e.BLOB="blob",e.ASCII="ascii",e.TEXT="text",e.VARCHAR="varchar",e.BOOLEAN="boolean",e.DOUBLE="double",e.FLOAT="float",e.BIGINT="bigint",e.INT="int",e.SMALLINT="smallint",e.TINYINT="tinyint",e.VARINT="varint",e.UUID="uuid",e.TIMEUUID="timeuuid",e.DATE="date",e.TIME="time",e.TIMESTAMP="timestamp",e.INET="inet",e.COUNTER="counter",e.now=c,e.uuid=u,e.toTimeStamp=l,e.connect=f,e.model=p;var m=function(){function e(t,r,n,i){this.createTable=v.createTable,this.checkTable=v.checkTable,this.parseQueryInsert=v.parseQueryInsert,this.parseQueryDelete=v.parseQueryDelete,this.parseQueryUpdate=v.parseQueryUpdate,this.parseQuerySelect=v.parseQuerySelect,this.remove=v.remove,this.update=v.update,this.create=v.create,this.find=v.find,this.findOne=v.findOne,this.findById=v.findById,this.seam=v.seam,t instanceof e?(this.obs=r,this.schema=t.schema,this.schemaHelper=t.schemaHelper,this.options=t.options):(this.obs=d.Observable.empty(),this.schema=r,this.schemaHelper=n,i&&(this.options=i))}return e.prototype.post=function(e,t){return this.schema.post(e,t)},e.prototype.pre=function(e,t){return this.schema.pre(e,t)},e.prototype.methods=function(e){return this.schema.methods(e)},e.prototype.validate=function(e,t){return this.schema.validate(e,t)},e.prototype.createIndex=function(e){this.schemaHelper.createIndex(e)},e}();e.Model=m}),e.file("libs/index.js",function(e,t,r,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("./schema");e.Schema=a.Schema,e.SchemaHelper=a.SchemaHelper;var o=t("./entity");e.Entity=o.Entity;var s=t("./createTable");e.createTable=s.createTable,e.checkTable=s.checkTable;var c=t("./create");e.create=c.create,e.parseQueryInsert=c.parseQueryInsert;var u=t("./remove");e.remove=u.remove,e.parseQueryDelete=u.parseQueryDelete;var l=t("./update");e.update=l.update,e.parseQueryUpdate=l.parseQueryUpdate;var f=t("./find");e.find=f.find,e.parseQuerySelect=f.parseQuerySelect;var p=t("./findOne");e.findOne=p.findOne;var h=t("./findById");e.findById=h.findById;var d=t("./seam");e.seam=d.seam}),e.file("libs/schema.js",function(e,t,r,n,i){"use strict";function a(e,t){for(var r=[],n=0;n<e.length;n++)for(var i=e[n],a=0;a<t.length&&i!==t[a];a++)a===t.length-1&&r.push(i);return r}Object.defineProperty(e,"__esModule",{value:!0}),e.objDiff=a;var o=function(){function e(e){this.message="Error",this.name="Model Error",this.errors=e}return e}();e.Error=o;var s=function(){function e(e,t){this.indexes=[],this.tblChked=!1,this.tableName=e,this.parseModel(t),this.indexes.push(["id"])}return e.prototype.createIndex=function(e){this.indexes.push(Array.isArray(e)?e:[e])},e.prototype.parseModel=function(e){var t=e.keys,r=[],n=[],i={},o={};for(var s in e){var c=e[s];"function"!=typeof c&&"keys"!==s&&"model"!==s&&("string"==typeof c?(r.push(s+" "+c),n.push(s)):(r.push(s+" "+c.type),n.push(s),c.default&&(o[s]=c.default),c.required&&(i[s]=c.required),c.validate&&(e["validate_"+s]=c.validate)))}this.columns=r.join(", "),this.keys=t.join(", "),this.allCol=n,this.columnList=a(n,t),this.keyList=t,this.defaults=o,this.require=i},e}();e.SchemaHelper=s;var c=function(){function e(t){if(this.id={type:"uuid",default:"uuid()"},t)if(t instanceof e)for(var r in t)"methods"!==r&&"pre"!==r&&"post"!==r&&"validate"!==r&&"function"==typeof t[r]&&(this[r]=t[r]);else for(var r in t)this[r]=t[r]}return e.prototype.methods=function(e){for(var t in e)this[t]=e[t]},e.prototype.validate=function(e,t){this["validate_"+e]=t},e.prototype.post=function(e,t){Array.isArray(e)||(e=[e]);for(var r=0;r<e.length;r++)switch(e[r]){case"create":this.post_create=t;break;case"update":this.post_update=t;break;case"find":this.post_find=t;break;case"remove":this.post_remove=t}},e.prototype.pre=function(e,t){Array.isArray(e)||(e=[e]);for(var r=0;r<e.length;r++)switch(e[r]){case"create":this.pre_create=t;break;case"update":this.pre_update=t;break;case"find":this.pre_find=t;break;case"remove":this.pre_remove=t}},e}();e.Schema=c}),e.file("libs/entity.js",function(e,t,r,n,i){"use strict";var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=t("../index"),s=t("./schema"),c=t("rxjs"),u=function(e){function t(t,r){var n=e.call(this,t)||this;return n.name="ValidationError",n.message=r,n}return a(t,e),t}(s.Error),l=function(e){function t(t,r,n){var i=e.call(this,r.schema)||this;return i.modified={},i.attributes={},delete i.id,i.model=r,i.toJSON=function(){return delete this.model,delete this.validationObs,delete this.requireObs,delete this.schemaHelper,delete this.modified,delete this.attributes,this},i.schemaHelper=r.schemaHelper,i.integrateItem(t,n),i}return a(t,e),t.prototype.integrateItem=function(e,t){var r=this;void 0===t&&(t={});for(var n=[],i=[],a=this.schemaHelper.allCol,o=this,s=0;s<a.length;s++)!function(s){var l=a[s],f=e[l],p=o.schemaHelper.require[l];t.requireChk&&p&&i.push(c.Observable.create(function(e){if(f)e.next(),e.complete();else{var t={};t[l]={message:"boolean"==typeof p?"'"+l+"' is a required field":p,kind:"user defined",path:l,value:f,name:"ValidationError"},e.error(new u(t,r.schemaHelper.tableName+" validation failed"))}})),t.validateChk&&o["validate_"+l]&&"function"==typeof o["validate_"+l]&&n.push(c.Observable.create(function(e){return r["validate_"+l](r[l],function(t){if(t){var n={};return n[l]={message:t?t:l+" could not be validated",kind:"user defined",path:l,value:f,name:"ValidationError"},e.error(new u(n,r.schemaHelper.tableName+" validation failed"))}e.next(),e.complete()})})),o[l]=f,f&&(o.attributes[l]=f),"function"!=typeof f&&Object.defineProperty(o,l,{get:function(){return f},set:function(e){f=e,this.attributes[l]=e,this.modified[l]=!0}})}(s);i.length>0&&(this.requireObs=i.length>1?c.Observable.merge.apply(this,i):i[0]),n.length>0&&(this.validationObs=n.length>1?c.Observable.merge.apply(this,n):n[0])},t.prototype.isEmpty=function(){for(var e in this.attributes)if(this.attributes.hasOwnProperty(e))return!1;return!0},t.prototype.merge=function(e){for(var t in e)this[t]=e[t];return this},t.prototype.save=function(e){var t=this;return c.Observable.create(function(r){for(var n=[],i=[],a=t.schemaHelper.keyList,s=t.schemaHelper.columnList,c="UPDATE "+t.schemaHelper.tableName+" SET ",u=" WHERE ",l=0;l<s.length;l++){var f=s[l];t[f]&&(c+=f+" = ?, ",n.push(t[f]))}for(var p=0;p<a.length;p++){var f=a[p],h=t[f];h&&(u+=f+" = ? AND ",i.push(h))}var d=c.substring(0,c.length-2)+u.substring(0,u.length-4),v=n.concat(i);return"create"!==e&&"remove"!==e&&(e="update"),o.client.execute(d,v,{prepare:!0}).then(function(n){t["post_"+e]?t["post_"+e](function(e){r.next(e),r.complete()},function(e){return r.error(e)},t):(r.next(t),r.complete())}).catch(function(e){return r.error(e)}),function(){}})},t.prototype.remove=function(e){var t=this;return c.Observable.create(function(r){for(var n=[],i="DELETE FROM "+t.schemaHelper.tableName+" WHERE ",a=t.schemaHelper.keyList,s=0;s<a.length;s++){var c=a[s];t[c]&&(i+=c+" = ? AND ",n.push(t[c]))}return"create"!==e&&"update"!==e&&(e="remove"),o.client.execute(i.substring(0,i.length-4),n,{prepare:!0}).then(function(n){t["post_"+e]?t["post_"+e](function(e){r.next(e),r.complete()},function(e){return r.error(e)},t):(r.next(t),r.complete())}).catch(function(e){return r.error(e)}),function(){}})},t}(s.Schema);e.Entity=l}),e.file("libs/createTable.js",function(e,t,r,n,i){"use strict";function a(e){var t=this;return c.Observable.create(function(e){var r=t.schemaHelper.tableName,n="CREATE TABLE IF NOT EXISTS "+r+" ("+t.schemaHelper.columns+", PRIMARY KEY ("+t.schemaHelper.keys+"))",i=t.schemaHelper.indexes,a=[];return s.client.execute(n).then(function(n){for(var o=0;o<i.length;o++)!function(e){var t=i[e].join("_"),n=i[e].join(", "),o="CREATE CUSTOM INDEX "+r+"_"+t+" on "+r+" ("+n+") using 'org.apache.cassandra.index.sasi.SASIIndex'";a.push(c.Observable.create(function(e){s.client.execute(o).then(function(t){e.next(),e.complete()}).catch(function(t){e.next(),e.complete()})}))}(o);(a.length>1?c.Observable.merge.apply(t,a):a[0]).subscribe(function(e){},function(t){return e.error(t)},function(){e.next(),e.complete()})}).catch(function(t){e.error(t)}),function(){}}).concat(e)}function o(e){return this.schemaHelper.tblChked?e:(this.schemaHelper.tblChked=!0,this.createTable(e))}Object.defineProperty(e,"__esModule",{value:!0});var s=t("../index"),c=t("rxjs");e.createTable=a,e.checkTable=o}),e.file("libs/create.js",function(e,t,r,n,i){"use strict";function a(e,t){var r=this;return u.Observable.create(function(n){var i=[],a="INSERT INTO "+r.schemaHelper.tableName+" (",o=") VALUES (";for(var c in e.attributes){var u=e[c];"now()"===u||"uuid()"===u||"toTimeStamp(now())"===u?(a+=c+", ",o+=u+", "):(a+=c+", ",o+="?, ",i.push(u))}var l=a.substring(0,a.length-2)+o.substring(0,o.length-2)+")";return t&&(t.if&&(l+=" IF NOT EXISTS"),t.using&&(l+=" USING "+t.using)),s.client.execute(l,i,{prepare:!0}).then(function(t){e.post_create?e.post_create(function(e){n.next(e),n.complete()},function(e){return n.error(e)},e):(n.next(e),n.complete())}).catch(function(e){return n.error(e)}),function(){}})}function o(e,t){var r=this.obs?u.Observable.concat(this.obs):null;e=Array.isArray(e)?e:[e];for(var n=[],i=[],a=[],o=[],l=this.schemaHelper.defaults,f=this,p=0;p<e.length;p++)!function(r){var s=e[r];for(var p in l)s[p]||(s[p]=l[p]);s=new c.Entity(s,f,{validateChk:!0,requireChk:!0}),s.requireObs&&i.push(s.requireObs),s.validationObs&&n.push(s.validationObs),s.pre_create&&a.push(u.Observable.create(function(e){s.pre_create(function(){e.next(),e.complete()},function(t){return e.error(t)},s)})),o.push(f.parseQueryInsert(s,t))}(p);return i.length>0&&(r=r.concat(i.length>1?u.Observable.merge.apply(this,i):i[0])),n.length>0&&(r=r.concat(n.length>1?u.Observable.merge.apply(this,n):n[0])),this.schema.pre_create&&(r=r.concat(a.length>1?u.Observable.merge.apply(this,a):a[0])),new s.Model(this,r.concat.apply(r,o))}Object.defineProperty(e,"__esModule",{value:!0});var s=t("../index"),c=t("./entity"),u=t("rxjs");e.parseQueryInsert=a,e.create=o}),e.file("libs/remove.js",function(e,t,r,n,i){"use strict";function a(e,t){var r=this;return u.Observable.create(function(n){var i=[],a="DELETE FROM "+r.schemaHelper.tableName;t&&t.using&&(a+=" USING "+t.using),a+=" WHERE";for(var o in e.attributes){var c=e[o];a+=" "+o+" = ? AND",i.push(c)}var u=a.substring(0,a.length-4);return t&&t.if&&(u+=" IF "+t.if),s.client.execute(u,i,{prepare:!0}).then(function(t){e.post_remove?e.post_remove(function(e){n.next(e),n.complete()},function(e){return n.error(e)},e):(n.next(e),n.complete())}).catch(function(e){return n.error(e)}),function(){}})}function o(e,t){var r=this,n=u.Observable.concat(this.obs);if(e){Array.isArray(e)||(e=[e]);for(var i=[],a=[],o=this,l=0;l<e.length;l++)!function(r){var n=new c.Entity(e[r],o);n.pre_remove&&i.push(u.Observable.create(function(e){n.pre_remove(function(){e.next(),e.complete()},function(t){return e.error(t)},n)})),a.push(o.parseQueryDelete(n,t))}(l);if(this.schema.pre_remove){var f=i.length>1?u.Observable.merge.apply(this,i):i[0];n=n.concat(f)}n=n.concat.apply(n,a)}else n=n.concat(u.Observable.create(function(e){return s.client.execute("TRUNCATE "+r.schemaHelper.tableName).then(function(t){e.next(),e.complete()}).catch(function(t){return e.error(t)}),function(){}}));return new s.Model(this,n)}Object.defineProperty(e,"__esModule",{value:!0});var s=t("../index"),c=t("./entity"),u=t("rxjs");e.parseQueryDelete=a,e.remove=o}),e.file("libs/update.js",function(e,t,r,n,i){"use strict";function a(e,t){var r=this;return u.Observable.create(function(n){var i=r.schemaHelper.keyList,a=r.schemaHelper.columnList,o=[],u="UPDATE "+r.schemaHelper.tableName;t&&t.using&&(u+=" USING "+t.using),u+=" SET";for(var l=0;l<a.length;l++){var f=a[l],p=e.attributes[f];p&&(u+=" "+f+" = ?, ",o.push(p))}u=u.substring(0,u.length-2)+" WHERE";for(var h=0;h<i.length;h++){var d=i[h],p=e.attributes[d];p&&(u+=" "+d+" = ? AND",o.push(p))}var v=u.substring(0,u.length-4);return v+=t&&t.if?" IF "+t.if:" IF EXISTS",s.client.execute(v,o,{prepare:!0}).then(function(t){e.post_update?e.post_update(function(e){n.next(e),n.complete()},function(e){return n.error(e)},e):(n.next(new c.Entity(e,r)),n.complete())}).catch(function(e){return n.error(e)}),function(){}})}function o(e,t){var r=u.Observable.concat(this.obs);e=Array.isArray(e)?e:[e];for(var n=[],i=[],a=[],o=this,l=0;l<e.length;l++)!function(r){var s=e[r],l=new c.Entity(s.set,o,{validateChk:!0});l.merge(s.where),l.validationObs&&n.push(l.validationObs),l.pre_update&&i.push(u.Observable.create(function(e){l.pre_update(function(){e.next(),e.complete()},function(t){return e.error(t)},l)})),a.push(o.parseQueryUpdate(l,t||{}))}(l);return n.length>0&&(r=r.concat(n.length>1?u.Observable.merge.apply(this,n):n[0])),this.schema.pre_update&&(r=r.concat(i.length>1?u.Observable.merge.apply(this,i):i[0])),new s.Model(this,r.concat.apply(r,a))}Object.defineProperty(e,"__esModule",{value:!0});var s=t("../index"),c=t("./entity"),u=t("rxjs");e.parseQueryUpdate=a,e.update=o}),e.file("libs/find.js",function(e,t,r,n,i){"use strict";function a(e,t){var r=this;return f.Observable.create(function(n){var i;if(t&&t.attributes){var a=t.attributes;Array.isArray(a)?i=a.join(","):a.exclude&&(i=l.objDiff(r.schemaHelper.allCol,a.exclude).join(","))}else i="*";var o="SELECT "+i+" FROM "+r.schemaHelper.tableName+" WHERE",s=[];if(e.isEmpty())o="SELECT "+i+" FROM "+r.schemaHelper.tableName;else{for(var f in e.attributes)o+=" "+f+" = ? AND",s.push(e[f]);o=o.substring(0,o.length-4)}return t&&(t.groupBy&&(o+=" GROUP BY "+t.groupBy),t.orderBy&&(o+=" ORDER BY "+t.orderBy),t.perPartitionLimit&&(o+=" PRE PARTITION LIMIT "+t.perPartitionLimit),t.limit&&(o+=" LIMIT "+t.limit),t.allowFiltering&&s.length>0&&(o+=" ALLOW FILTERING")),c.client.execute(o,s,{prepare:!0}).then(function(e){var t,i=e.rows;if(0===i.length){var a={message:"No Entities were found",kind:"library defined",name:"NotFoundError"};n.error(new p(a,"No Entities were found"))}else if(i.length>1){t=[];for(var o=0;o<i.length;o++)t.push(new u.Entity(i[o],r))}else t=new u.Entity(i[0]||{},r);r.schema.post_find?r.schema.post_find(function(e){n.next(e),n.complete()},function(e){return n.error(e)},t):(n.next(t),n.complete())}).catch(function(e){return n.error(e)}),function(){}})}function o(e,t){var r=f.Observable.concat(this.obs),n=new u.Entity(e||{},this);return n.pre_find&&(r=r.concat(f.Observable.create(function(e){n.pre_find(function(){e.next(),e.complete()},function(t){return e.error(t)},n)}))),r=r.concat(this.parseQuerySelect(n,t)),new c.Model(this,r)}var s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var c=t("../index"),u=t("./entity"),l=t("./schema"),f=t("rxjs"),p=function(e){function t(t,r){var n=e.call(this,t)||this;return n.message="Row not found",n.name="NotFoundError",n}return s(t,e),t}(l.Error);e.parseQuerySelect=a,e.find=o}),e.file("libs/findOne.js",function(e,t,r,n,i){"use strict";function a(e,t){var r=c.Observable.concat(this.obs),n=new s.Entity(e||{},this);return t||(t={}),t.limit=1,n.pre_find&&(r=r.concat(c.Observable.create(function(e){n.pre_find(function(){e.next(),e.complete()},function(t){return e.error(t)},n)}))),r=r.concat(this.parseQuerySelect(n,t)),new o.Model(this,r)}Object.defineProperty(e,"__esModule",{value:!0});var o=t("../index"),s=t("./entity"),c=t("rxjs");e.findOne=a}),e.file("libs/findById.js",function(e,t,r,n,i){"use strict";function a(e,t){var r=this,n=u.Observable.concat(this.obs),i=new s.Entity({id:e},this);return i.pre_find&&(n=n.concat(u.Observable.create(function(e){i.pre_find(function(){e.next(),e.complete()},function(t){return e.error(t)},i)}))),n=n.concat(u.Observable.create(function(n){var a;if(t&&t.attributes){var u=t.attributes;Array.isArray(u)?a=u.join(","):u.exclude&&(a=c.objDiff(r.schemaHelper.allCol,u.exclude).join(","))}else a="*";var l="SELECT "+a+" FROM "+r.schemaHelper.tableName+" WHERE id = "+e;return o.client.execute(l).then(function(e){var t,a=e.rows;if(0===a.length)n.error({message:"No Entities were found",statusCode:404});else if(a.length>1){t=[];for(var o=0;o<a.length;o++)t.push(new s.Entity(a[o],r))}else t=new s.Entity(a[0],r);i.post_find?i.post_find(function(e){n.next(e),n.complete()},function(e){return n.error(e)},t):(n.next(t),n.complete())}).catch(function(e){return n.error(e)}),function(){}})),new o.Model(this,n)}Object.defineProperty(e,"__esModule",{value:!0});var o=t("../index"),s=t("./entity"),c=t("./schema"),u=t("rxjs");e.findById=a}),e.file("libs/seam.js",function(e,t,r,n,i){"use strict";function a(){return this.checkTable(this.obs).filter(function(e){return e})}Object.defineProperty(e,"__esModule",{value:!0}),e.seam=a}),e.entry="index.js"}),e.global("__extends",function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),e.expose([{alias:"*",pkg:"cassmask/index.js"}]),e.main("cassmask/index.js"),e.defaultPackageName="cassmask"}(function(e){function t(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);if((p||58!==r)&&(t>=97&&t<=122||64===t)){if(64===t){var n=e.split("/"),i=n.splice(2,n.length).join("/");return[n[0]+"/"+n[1],i||void 0]}var a=e.indexOf("/");if(a===-1)return[e];return[e.substring(0,a),e.substring(a+1)]}}function r(e){return e.substring(0,e.lastIndexOf("/"))||"./"}function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=[],n=0,i=arguments.length;n<i;n++)r=r.concat(arguments[n].split("/"));for(var a=[],n=0,i=r.length;n<i;n++){var o=r[n];o&&"."!==o&&(".."===o?a.pop():a.push(o))}return""===r[0]&&a.unshift(""),a.join("/")||(a.length?"/":".")}function i(e){var t=e.match(/\.(\w{1,})$/);return t&&t[1]?e:e+".js"}function a(e){if(p){var t,r=document,n=r.getElementsByTagName("head")[0];/\.css$/.test(e)?(t=r.createElement("link"),t.rel="stylesheet",t.type="text/css",t.href=e):(t=r.createElement("script"),t.type="text/javascript",t.src=e,t.async=!0),n.insertBefore(t,n.firstChild)}}function o(e,t){for(var r in e)e.hasOwnProperty(r)&&t(r,e[r])}function s(e){return{server:require(e)}}function c(e,r){var a=r.path||"./",o=r.pkg||"default",c=t(e);if(c&&(a="./",o=c[0],r.v&&r.v[o]&&(o=o+"@"+r.v[o]),e=c[1]),e)if(126===e.charCodeAt(0))e=e.slice(2,e.length),a="./";else if(!p&&(47===e.charCodeAt(0)||58===e.charCodeAt(1)))return s(e);var u=v[o];if(!u){if(p)throw"Package not found "+o;return s(o+(e?"/"+e:""))}e=e?e:"./"+u.s.entry;var l,f=n(a,e),h=i(f),d=u.f[h];return!d&&h.indexOf("*")>-1&&(l=h),d||l||(h=n(f,"/","index.js"),d=u.f[h],d||(h=f+".js",d=u.f[h]),d||(d=u.f[f+".jsx"]),d||(h=f+"/index.jsx",d=u.f[h])),{file:d,wildcard:l,pkgName:o,versions:u.v,filePath:f,validPath:h}}function u(e,t){if(!p)return t(/\.(js|json)$/.test(e)?h.require(e):"");var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==r.readyState)if(200==r.status){var i=r.getResponseHeader("Content-Type"),a=r.responseText;/json/.test(i)?a="module.exports = "+a:/javascript/.test(i)||(a="module.exports = "+JSON.stringify(a));var o=n("./",e);b.dynamic(o,a),t(b.import(e,{}))}else console.error(e,"not found on request"),t(void 0)},r.open("GET",e,!0),r.send()}function l(e,t){var r=m[e];if(r)for(var n in r){var i=r[n].apply(null,t);if(i===!1)return!1}}function f(e,t){if(void 0===t&&(t={}),58===e.charCodeAt(4)||58===e.charCodeAt(5))return a(e);var n=c(e,t);if(n.server)return n.server;var i=n.file;if(n.wildcard){var o=new RegExp(n.wildcard.replace(/\*/g,"@").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&").replace(/@/g,"[a-z0-9$_-]+"),"i"),s=v[n.pkgName];if(s){var d={};for(var m in s.f)o.test(m)&&(d[m]=f(n.pkgName+"/"+m));return d}}if(!i){var b="function"==typeof t;if(l("async",[e,t])===!1)return;return u(e,function(e){return b?t(e):null})}var y=n.pkgName;if(i.locals&&i.locals.module)return i.locals.module.exports;var g=i.locals={},_=r(n.validPath);g.exports={},g.module={exports:g.exports},g.require=function(e,t){return f(e,{pkg:y,path:_,v:n.versions})},g.require.main={filename:p?"./":h.require.main.filename,paths:p?[]:h.require.main.paths};var x=[g.module.exports,g.require,g.module,n.validPath,_,y];return l("before-import",x),i.fn.apply(0,x),l("after-import",x),g.module.exports}if(e.FuseBox)return e.FuseBox;var p="undefined"!=typeof window&&window.navigator,h=p?window:global;p&&(h.global=window),e=p&&"undefined"==typeof __fbx__dnm__?e:module.exports;var d=p?window.__fsbx__=window.__fsbx__||{}:h.$fsbx=h.$fsbx||{};p||(h.require=require);var v=d.p=d.p||{},m=d.e=d.e||{},b=function(){function t(){}return t.global=function(e,t){return void 0===t?h[e]:void(h[e]=t)},t.import=function(e,t){return f(e,t)},t.on=function(e,t){m[e]=m[e]||[],m[e].push(t)},t.exists=function(e){try{return void 0!==c(e,{}).file}catch(e){return!1}},t.remove=function(e){var t=c(e,{}),r=v[t.pkgName];r&&r.f[t.validPath]&&delete r.f[t.validPath]},t.main=function(e){return this.mainFile=e,t.import(e,{})},t.expose=function(t){for(var r in t)!function(r){var n=t[r].alias,i=f(t[r].pkg);"*"===n?o(i,function(t,r){return e[t]=r}):"object"==typeof n?o(n,function(t,r){return e[r]=i[t]}):e[n]=i}(r)},t.dynamic=function(t,r,n){this.pkg(n&&n.pkg||"default",{},function(n){n.file(t,function(t,n,i,a,o){new Function("__fbx__dnm__","exports","require","module","__filename","__dirname","__root__",r)(!0,t,n,i,a,o,e)})})},t.flush=function(e){var t=v.default;for(var r in t.f)e&&!e(r)||delete t.f[r].locals},t.pkg=function(e,t,r){if(v[e])return r(v[e].s);var n=v[e]={};return n.f={},n.v=t,n.s={file:function(e,t){return n.f[e]={fn:t}}},r(n.s)},t.addPlugin=function(e){this.plugins.push(e)},t}();return b.packages=v,b.isBrowser=void 0!==p,b.isServer=!p,b.plugins=[],e.FuseBox=b}(this));